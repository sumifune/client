(this["webpackJsonpreact-crud"]=this["webpackJsonpreact-crud"]||[]).push([[0],{47:function(e,t,a){e.exports=a(79)},53:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(17),c=a.n(r),s=a(20),l=a(14),o=a(15),m=a(18),u=a(19),d=a(5),h=(a(52),a(53),a(4)),p=a(40),g=a.n(p).a.create({baseURL:"http://localhost:3000/api",headers:{"Content-type":"application/json"}}),v=new(function(){function e(){Object(l.a)(this,e)}return Object(o.a)(e,[{key:"getAll",value:function(e){return g.get("/patients",{params:e})}},{key:"get",value:function(e){return g.get("/patients/".concat(e))}},{key:"create",value:function(e){return g.post("/patients",e)}},{key:"update",value:function(e,t){return g.put("/patients/".concat(e),t)}},{key:"delete",value:function(e){return g.delete("/patients/".concat(e))}},{key:"deleteAll",value:function(){return g.delete("/patients")}},{key:"findBySurname",value:function(e){return g.get("/patients?surname=".concat(e))}}]),e}()),b=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onChangeName=n.onChangeName.bind(Object(h.a)(n)),n.onChangeSurname=n.onChangeSurname.bind(Object(h.a)(n)),n.onChangeAddress=n.onChangeAddress.bind(Object(h.a)(n)),n.onChangeCity=n.onChangeCity.bind(Object(h.a)(n)),n.onChangeDni=n.onChangeDni.bind(Object(h.a)(n)),n.onChangePhone=n.onChangePhone.bind(Object(h.a)(n)),n.onChangeEmail=n.onChangeEmail.bind(Object(h.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(h.a)(n)),n.savePatient=n.savePatient.bind(Object(h.a)(n)),n.newPatient=n.newPatient.bind(Object(h.a)(n)),n.state={id:null,name:"",surname:"",address:"",city:"",dni:"",phone:"",email:"",description:"",active:!1,submitted:!1},n}return Object(o.a)(a,[{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeSurname",value:function(e){this.setState({surname:e.target.value})}},{key:"onChangeAddress",value:function(e){this.setState({address:e.target.value})}},{key:"onChangeCity",value:function(e){this.setState({city:e.target.value})}},{key:"onChangeDni",value:function(e){this.setState({dni:e.target.value})}},{key:"onChangePhone",value:function(e){this.setState({phone:e.target.value})}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"savePatient",value:function(){var e=this,t={name:this.state.name,surname:this.state.surname,address:this.state.address,city:this.state.city,dni:this.state.dni,phone:this.state.phone,email:this.state.email,description:this.state.description};v.create(t).then((function(t){e.setState({id:t.data.id,name:t.data.name,surname:t.data.surname,address:t.data.address,city:t.data.city,dni:t.data.dni,phone:t.data.phone,email:t.data.email,description:t.data.description,active:t.data.active,submitted:!0})})).catch((function(e){console.log(e)}))}},{key:"newPatient",value:function(){this.setState({id:null,name:"",surname:"",address:"",city:"",dni:"",phone:"",email:"",description:"",active:!1,submitted:!1})}},{key:"render",value:function(){return i.a.createElement("div",{className:"submit-form"},this.state.submitted?i.a.createElement("div",null,i.a.createElement("h4",null,"A\xf1adido correctamente!"),i.a.createElement("button",{className:"btn btn-success",onClick:this.newPatient},"Nuevo")):i.a.createElement("div",null,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"title"},"Nombre"),i.a.createElement("input",{type:"text",className:"form-control",id:"name",required:!0,value:this.state.name,onChange:this.onChangeName,name:"name"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"surname"},"Apellidos"),i.a.createElement("input",{type:"text",className:"form-control",id:"surname",required:!0,value:this.state.surname,onChange:this.onChangeSurname,name:"surname"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"address"},"Direcci\xf3n"),i.a.createElement("input",{type:"text",className:"form-control",id:"address",required:!0,value:this.state.address,onChange:this.onChangeAddress,name:"address"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"city"},"Ciudad"),i.a.createElement("input",{type:"text",className:"form-control",id:"city",required:!0,value:this.state.city,onChange:this.onChangeCity,name:"city"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"dni"},"DNI"),i.a.createElement("input",{type:"text",className:"form-control",id:"dni",required:!0,value:this.state.dni,onChange:this.onChangeDni,name:"dni"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"phone"},"Tel\xe9fono"),i.a.createElement("input",{type:"text",className:"form-control",id:"phone",required:!0,value:this.state.phone,onChange:this.onChangePhone,name:"phone"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"email"},"Email"),i.a.createElement("input",{type:"text",className:"form-control",id:"email",required:!0,value:this.state.email,onChange:this.onChangeEmail,name:"email"})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"description"},"Descripci\xf3n"),i.a.createElement("input",{type:"text",className:"form-control",id:"description",required:!0,value:this.state.description,onChange:this.onChangeDescription,name:"description"})),i.a.createElement("button",{style:{marginBottom:"25px"},onClick:this.savePatient,className:"btn btn-secondary"},"A\xf1adir")))}}]),a}(n.Component),E=a(12),f=(a(71),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onChangeName=n.onChangeName.bind(Object(h.a)(n)),n.onChangeSurname=n.onChangeSurname.bind(Object(h.a)(n)),n.onChangeAddress=n.onChangeAddress.bind(Object(h.a)(n)),n.onChangeCity=n.onChangeCity.bind(Object(h.a)(n)),n.onChangeDni=n.onChangeDni.bind(Object(h.a)(n)),n.onChangePhone=n.onChangePhone.bind(Object(h.a)(n)),n.onChangeEmail=n.onChangeEmail.bind(Object(h.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(h.a)(n)),n.getPatient=n.getPatient.bind(Object(h.a)(n)),n.updateActive=n.updateActive.bind(Object(h.a)(n)),n.updatePatient=n.updatePatient.bind(Object(h.a)(n)),n.deletePatient=n.deletePatient.bind(Object(h.a)(n)),n.state={currentPatient:{id:null,name:"",surname:"",address:"",city:"",dni:"",phone:"",email:"",description:"",active:!1,submitted:!1},message:""},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getPatient(this.props.match.params.id)}},{key:"onChangeName",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(E.a)({},e.currentPatient,{name:t})}}))}},{key:"onChangeSurname",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(E.a)({},e.currentPatient,{surname:t})}}))}},{key:"onChangeAddress",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(E.a)({},e.currentPatient,{address:t})}}))}},{key:"onChangeCity",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(E.a)({},e.currentPatient,{city:t})}}))}},{key:"onChangeDni",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(E.a)({},e.currentPatient,{dni:t})}}))}},{key:"onChangePhone",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(E.a)({},e.currentPatient,{phone:t})}}))}},{key:"onChangeEmail",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(E.a)({},e.currentPatient,{email:t})}}))}},{key:"onChangeDescription",value:function(e){var t=e.target.value;this.setState((function(e){return{currentPatient:Object(E.a)({},e.currentPatient,{description:t})}}))}},{key:"getPatient",value:function(e){var t=this;v.get(e).then((function(e){t.setState({currentPatient:e.data})})).catch((function(e){console.log(e)}))}},{key:"updateActive",value:function(e){var t=this,a={id:this.state.currentPatient.id,name:this.state.currentPatient.name,surname:this.state.currentPatient.surname,address:this.state.currentPatient.address,city:this.state.currentPatient.city,dni:this.state.currentPatient.dni,phone:this.state.currentPatient.phone,email:this.state.currentPatient.email,description:this.state.currentPatient.description,active:e};v.update(this.state.currentPatient.id,a).then((function(a){t.setState((function(t){return{currentPatient:Object(E.a)({},t.currentPatient,{active:e})}}))})).catch((function(e){console.log(e)}))}},{key:"updatePatient",value:function(){var e=this;v.update(this.state.currentPatient.id,this.state.currentPatient).then((function(t){e.setState({message:"Paciente actualizado correctamente!"})})).catch((function(e){console.log(e)}))}},{key:"deletePatient",value:function(){var e=this;v.delete(this.state.currentPatient.id).then((function(t){e.props.history.push("/patients")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.currentPatient;return i.a.createElement("div",null,t?i.a.createElement("div",{className:"edit-form"},i.a.createElement("form",null,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"name"},"Nombre"),i.a.createElement("input",{type:"text",className:"form-control",id:"name",value:t.name,onChange:this.onChangeName})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"surname"},"Apellidos"),i.a.createElement("input",{type:"text",className:"form-control",id:"surname",value:t.surname,onChange:this.onChangeSurname})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"address"},"Direcci\xf3n"),i.a.createElement("input",{type:"text",className:"form-control",id:"address",value:t.address,onChange:this.onChangeAddress})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"city"},"Ciudad"),i.a.createElement("input",{type:"text",className:"form-control",id:"city",value:t.city,onChange:this.onChangeCity})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"dni"},"DNI"),i.a.createElement("input",{type:"text",className:"form-control",id:"dni",value:t.dni,onChange:this.onChangeDni})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"phone"},"Tel\xe9fono"),i.a.createElement("input",{type:"text",className:"form-control",id:"phone",value:t.phone,onChange:this.onChangePhone})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"email"},"Email"),i.a.createElement("input",{type:"text",className:"form-control",id:"email",value:t.email,onChange:this.onChangeEmail})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"description"},"Descripci\xf3n"),i.a.createElement("input",{type:"text",className:"form-control",id:"description",value:t.description,onChange:this.onChangeDescription})),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,i.a.createElement("strong",null,"Estado:")),t.active?"Active":"Inactive")),i.a.createElement("div",{className:"action-buttons"},t.active?i.a.createElement("button",{className:"badge badge-primary mr-2",onClick:function(){return e.updateActive(!1)}},"Desactivar"):i.a.createElement("button",{className:"badge badge-primary mr-2",onClick:function(){return e.updateActive(!0)}},"Activar"),i.a.createElement("button",{className:"badge badge-danger mr-2",onClick:this.deletePatient},"Eliminar"),i.a.createElement("button",{type:"submit",className:"badge badge-success",onClick:this.updatePatient},"Actualizar"),i.a.createElement("p",null,this.state.message))):i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement("p",null,"Please click on a Patient...")))}}]),a}(n.Component)),C=a(43),y=a(97),N=(a(72),a(24)),P=a(42),k=a(21),j=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleKeyPress=function(e){"Enter"===e.key&&(console.log("enter press here! "),n.retrievePatients())},n.onChangeSearchSurname=n.onChangeSearchSurname.bind(Object(h.a)(n)),n.retrievePatients=n.retrievePatients.bind(Object(h.a)(n)),n.handlePageChange=n.handlePageChange.bind(Object(h.a)(n)),n.handlePageSizeChange=n.handlePageSizeChange.bind(Object(h.a)(n)),n.toggleMenu=n.toggleMenu.bind(Object(h.a)(n)),n.state={patients:[],searchSurname:"",page:1,count:0,pageSize:3},n.pageSizes=[3,6,9],n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.retrievePatients()}},{key:"onChangeSearchSurname",value:function(e){var t=e.target.value;this.setState({searchSurname:t})}},{key:"getRequestParams",value:function(e,t,a){var n={};return e&&(n.surname=e),t&&(n.page=t-1),a&&(n.size=a),n}},{key:"retrievePatients",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.page,i=t.pageSize,r=this.getRequestParams(a,n,i);v.getAll(r).then((function(t){var a=t.data,n=a.patients,i=a.totalPages;e.setState({patients:n,count:i})})).catch((function(e){console.log(e)}))}},{key:"handlePageChange",value:function(e,t){var a=this;this.setState({page:t},(function(){a.retrievePatients()}))}},{key:"handlePageSizeChange",value:function(e){var t=this;this.setState({pageSize:e.target.value,page:1},(function(){t.retrievePatients()}))}},{key:"toggleMenu",value:function(e){var t=Object(C.a)(this.state.patients),a=Object(E.a)({},t[e.target.getAttribute("inx")]);a.expanded=!a.expanded,t[e.target.getAttribute("inx")]=a,this.setState({patients:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchSurname,n=t.patients,r=t.page,c=t.count,l=t.pageSize;return i.a.createElement("div",{className:"list row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"input-group mb-3"},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Buscar por apellido",value:a,onChange:this.onChangeSearchSurname,onKeyPress:this.handleKeyPress}),i.a.createElement("div",{className:"input-group-append"},i.a.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.retrievePatients},"Buscar")))),i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{id:"accordion"},n&&n.map((function(t,a){return i.a.createElement("div",{className:"card",key:a},i.a.createElement("div",{className:"card-header",id:"heading".concat(a)},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-9"},i.a.createElement("h5",{className:"mb-0"},i.a.createElement("button",{className:"btn btn-link"+(t.expanded?"":" collapsed"),"data-toggle":"collapse","data-target":"#collapse".concat(a),"aria-expanded":t.expanded?"true":"false","aria-controls":"collapse".concat(a),inx:a,onClick:e.toggleMenu},t.surname,",\xa0 ",t.name))),i.a.createElement("div",{className:"col-3"},i.a.createElement(k.a,{as:P.a},i.a.createElement(N.a,{variant:"success"},"Citar"),i.a.createElement(k.a.Toggle,{split:!0,variant:"success",id:"dropdown-split-basic"}),i.a.createElement(k.a.Menu,null,i.a.createElement(k.a.Item,{href:"/add"},"Nuevo"),i.a.createElement(k.a.Item,{href:"#/action-2"},"Facturar")))))),i.a.createElement("div",{id:"collapse".concat(a),className:"collapse"+(t.expanded?" show":""),"aria-labelledby":"heading".concat(a),"data-parent":"#accordion"},i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-9"},i.a.createElement("p",null,t.address," - \xa0 ",t.city),i.a.createElement("p",null,"DNI: ",t.dni," - \xa0 Tel: ",t.phone),i.a.createElement("p",null,t.email),i.a.createElement("p",null,"Notas: ",t.description),i.a.createElement("p",{className:"badgePatient"},t.active?i.a.createElement("span",{className:"badge badge-primary"},"Activo"):i.a.createElement("span",{className:"badge badge-danger"},"Inactivo"))),i.a.createElement("div",{className:"col-3"},i.a.createElement(s.b,{type:"button",to:"/patients/"+t.id,className:"btn btn-secondary"},"Editar"))))))})))),i.a.createElement("div",{className:"col-md-12"},i.a.createElement("div",{className:"paging"},i.a.createElement("div",null,"Refs por p\xe1gina: ",i.a.createElement("select",{onChange:this.handlePageSizeChange,value:l},this.pageSizes.map((function(e){return i.a.createElement("option",{key:e,value:e},e)})))),i.a.createElement("div",null,i.a.createElement("div",{className:"bbb"},i.a.createElement(y.a,{className:"my-3",count:c,page:r,siblingCount:1,boundaryCount:1,variant:"outlined",shape:"rounded",onChange:this.handlePageChange}))))))}}]),a}(n.Component),O=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return i.a.createElement(s.a,null,i.a.createElement("div",null,i.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark"},i.a.createElement("a",{href:"/patients",className:"navbar-brand"},"Centro Otomo"),i.a.createElement("div",{className:"navbar-nav mr-auto"},i.a.createElement("li",{className:"nav-item"},i.a.createElement(s.b,{to:"/patients",className:"nav-link"},"Pacientes")),i.a.createElement("li",{className:"nav-item"},i.a.createElement(s.b,{to:"/add",className:"nav-link"},"Nuevo")))),i.a.createElement("div",{className:"container mt-3"},i.a.createElement(d.c,null,i.a.createElement(d.a,{exact:!0,path:["/","/patients"],component:j}),i.a.createElement(d.a,{exact:!0,path:"/add",component:b}),i.a.createElement(d.a,{path:"/patients/:id",component:f})))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(s.a,null,i.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.898dc87d.chunk.js.map